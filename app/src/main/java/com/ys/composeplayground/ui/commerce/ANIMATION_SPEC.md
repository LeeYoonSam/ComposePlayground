# Commerce Sale Tab - ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ Morphing ì• ë‹ˆë©”ì´ì…˜ ìŠ¤í™

## 1. ê°œìš”

ì»¤ë¨¸ìŠ¤ ì„¸ì¼ íƒ­ì—ì„œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¤í¬ë¡¤í•  ë•Œ, ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ ì˜ì—­ì´ **í™•ì¥ ìƒíƒœ**(í° ì›í˜• ì•„ì´ì½˜ + í•˜ë‹¨ í…ìŠ¤íŠ¸)ì—ì„œ **ì¶•ì†Œ ìƒíƒœ**(ì¹© í˜•íƒœì˜ ì•„ì´ì½˜ + ìš°ì¸¡ í…ìŠ¤íŠ¸)ë¡œ ë¶€ë“œëŸ½ê²Œ ì „í™˜ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì…ë‹ˆë‹¤.

```
í™•ì¥ ìƒíƒœ (progress = 0)          ì¶•ì†Œ ìƒíƒœ (progress = 1)

    â”Œâ”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ”´   â”‚  56dp              â”‚ğŸ”´â”‚ ì „ì²´    â”‚  24dp ì•„ì´ì½˜
    â”‚      â”‚                     â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”˜
     ì „ì²´      â† í…ìŠ¤íŠ¸           ì¹© í˜•íƒœ (36dp ë†’ì´)
```

í•µì‹¬: **í•˜ë‚˜ì˜ ì•„ì´ì½˜**ê³¼ **í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸**ë§Œ ë Œë”ë§í•˜ê³ , Custom Layoutìœ¼ë¡œ ìœ„ì¹˜ë¥¼ ë³´ê°„í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ morphing íš¨ê³¼ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

---

## 2. ì• ë‹ˆë©”ì´ì…˜ êµ¬ë™ íŒŒì´í”„ë¼ì¸

ì „ì²´ ë°ì´í„° íë¦„ì€ 3ë‹¨ê³„ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

```
[1ë‹¨ê³„] ìŠ¤í¬ë¡¤ ê°ì§€        [2ë‹¨ê³„] ì§„í–‰ë„ ê³„ì‚°        [3ë‹¨ê³„] ë ˆì´ì•„ì›ƒ ë³´ê°„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NestedScrollConnection   derivedStateOf              Custom Layout
  â””â”€ onPreScroll           â””â”€ collapseProgress         â””â”€ lerpInt(x, y)
       â”‚                        (0f ~ 1f)                    â”‚
  delta.y ëˆ„ì  â”€â”€â”€â”€â”€â”€â”€â†’  offset / max â”€â”€â”€â”€â”€â”€â”€â”€â†’  ì•„ì´ì½˜/í…ìŠ¤íŠ¸ ìœ„ì¹˜ ë³´ê°„
  scrollOffset                                    + í¬ê¸° ë³´ê°„ (lerp Dp)
  (0 ~ maxPx)
```

### 2-1. 1ë‹¨ê³„: ìŠ¤í¬ë¡¤ ê°ì§€ (NestedScrollConnection)

```
íŒŒì¼: SaleTabScreen.kt (L60-70)
```

```kotlin
val nestedScrollConnection = remember {
    object : NestedScrollConnection {
        override fun onPreScroll(available: Offset, source: NestedScrollSource): Offset {
            val delta = available.y
            val newOffset = scrollOffset.floatValue - delta
            scrollOffset.floatValue = newOffset.coerceIn(0f, maxCollapseOffsetPx)
            return Offset.Zero  // ìŠ¤í¬ë¡¤ì„ ì†Œë¹„í•˜ì§€ ì•ŠìŒ â†’ í•˜ìœ„ LazyGridë„ ìŠ¤í¬ë¡¤ ê°€ëŠ¥
        }
    }
}
```

| í•­ëª© | ê°’ | ì„¤ëª… |
|------|-----|------|
| `maxCollapseOffsetPx` | `44.dp â†’ px` | í™•ì¥ ë†’ì´(92dp) - ì¶•ì†Œ ë†’ì´(48dp) |
| `scrollOffset` | `0 ~ maxPx` | ëˆ„ì  ìŠ¤í¬ë¡¤ ì˜¤í”„ì…‹ (px) |
| `delta.y` | ì–‘ìˆ˜=ìœ„ë¡œ, ìŒìˆ˜=ì•„ë˜ë¡œ | ìŠ¤í¬ë¡¤ ë°©í–¥ë³„ ë¶€í˜¸ |
| ë°˜í™˜ê°’ | `Offset.Zero` | ìŠ¤í¬ë¡¤ì„ ì†Œë¹„í•˜ì§€ ì•Šì•„ LazyVerticalGridì— ì „ë‹¬ |

**ë™ì‘ ì›ë¦¬**:
- ì‚¬ìš©ìê°€ **ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤** â†’ `delta.y < 0` â†’ `scrollOffset` ì¦ê°€ â†’ progress ì¦ê°€ â†’ ì¶•ì†Œ
- ì‚¬ìš©ìê°€ **ìœ„ë¡œ ìŠ¤í¬ë¡¤** â†’ `delta.y > 0` â†’ `scrollOffset` ê°ì†Œ â†’ progress ê°ì†Œ â†’ í™•ì¥
- `coerceIn(0f, maxPx)`ìœ¼ë¡œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ì œí•œ

### 2-2. 2ë‹¨ê³„: ì§„í–‰ë„ ê³„ì‚° (derivedStateOf)

```
íŒŒì¼: SaleTabScreen.kt (L54-58)
```

```kotlin
val collapseProgress by remember {
    derivedStateOf {
        (scrollOffset.floatValue / maxCollapseOffsetPx).coerceIn(0f, 1f)
    }
}
```

| collapseProgress | ìƒíƒœ | ì˜ë¯¸ |
|:---:|:---:|:---|
| `0.0` | ì™„ì „ í™•ì¥ | ì•„ì´ì½˜ 56dp, ì„¸ë¡œ ë°°ì¹˜, ì¹© ë°°ê²½ íˆ¬ëª… |
| `0.25` | í™•ì¥ ì¤‘ | ì•„ì´ì½˜ 48dp, ì„¸ë¡œâ†’ê°€ë¡œ ì „í™˜ ì‹œì‘ |
| `0.5` | ì¤‘ê°„ | ì•„ì´ì½˜ 40dp, ë ˆì´ì•„ì›ƒ ì „í™˜ ì¤‘ê°„ ì§€ì  |
| `0.75` | ì¶•ì†Œ ì¤‘ | ì•„ì´ì½˜ 32dp, ì¹© í˜•íƒœì— ê°€ê¹Œì›€ |
| `1.0` | ì™„ì „ ì¶•ì†Œ | ì•„ì´ì½˜ 24dp, ê°€ë¡œ ë°°ì¹˜, ì¹© ë°°ê²½ ë¶ˆíˆ¬ëª… |

**`derivedStateOf` ì‚¬ìš© ì´ìœ **: `scrollOffset`ì´ ë³€í•  ë•Œë§ˆë‹¤ `collapseProgress`ë¥¼ ì¬ê³„ì‚°í•˜ë˜, ê²°ê³¼ ê°’ì´ ë™ì¼í•˜ë©´ í•˜ìœ„ ì»´í¬ì €ë¸”ì˜ ë¶ˆí•„ìš”í•œ recompositionì„ ë°©ì§€í•©ë‹ˆë‹¤.

### 2-3. 3ë‹¨ê³„: Custom Layout ë³´ê°„

```
íŒŒì¼: CategoryIconRow.kt (L139-238)
```

Composeì˜ `Layout` ì»´í¬ì €ë¸”ì„ ì‚¬ìš©í•˜ì—¬ measure/place ë‹¨ê³„ì—ì„œ ìœ„ì¹˜ë¥¼ ì§ì ‘ ê³„ì‚°í•©ë‹ˆë‹¤.

---

## 3. Custom Layout ìƒì„¸ êµ¬ì¡°

### 3-1. Content êµ¬ì„± (3ê°œ ìš”ì†Œ)

```kotlin
Layout(
    content = {
        // [0] ì¹© ë°°ê²½    â† alpha(collapseProgress)ë¡œ ì„œì„œíˆ ë‚˜íƒ€ë‚¨
        // [1] ì•„ì´ì½˜ ì›í˜•  â† size = lerp(56.dp, 24.dp, progress)
        // [2] í…ìŠ¤íŠ¸ ë¼ë²¨  â† ìœ„ì¹˜ë§Œ ì´ë™, í¬ê¸° ê³ ì •
    }
)
```

| Index | ìš”ì†Œ | í™•ì¥ ìƒíƒœ | ì¶•ì†Œ ìƒíƒœ | ë³´ê°„ ëŒ€ìƒ |
|:---:|:---|:---|:---|:---|
| 0 | ì¹© ë°°ê²½ (Box) | alpha = 0 (íˆ¬ëª…) | alpha = 1 (ë¶ˆíˆ¬ëª…) | alpha |
| 1 | ì•„ì´ì½˜ (Box + CircleShape) | 56dp, ìƒë‹¨ ì¤‘ì•™ | 24dp, ì¢Œì¸¡ ì¤‘ì•™ | size, x, y |
| 2 | í…ìŠ¤íŠ¸ (Text) | ì•„ì´ì½˜ ì•„ë˜ ì¤‘ì•™ | ì•„ì´ì½˜ ìš°ì¸¡ ì¤‘ì•™ | x, y |

### 3-2. Measure ë‹¨ê³„: ì»¨í…Œì´ë„ˆ í¬ê¸° ê³„ì‚°

```
í™•ì¥ (ì„¸ë¡œ ë°°ì¹˜)                    ì¶•ì†Œ (ê°€ë¡œ ë°°ì¹˜ ì¹©)

 â—€â”€â”€ expandedWidth â”€â”€â–¶             â—€â”€â”€â”€â”€â”€â”€ collapsedWidth â”€â”€â”€â”€â”€â”€â–¶
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â–²           â”‚ pad â”Œâ”€â”€â”€â”€â” gap  í…ìŠ¤íŠ¸  pad  â”‚ â–²
 â”‚     â”‚  icon  â”‚    â”‚ â”‚ iconH     â”‚     â”‚iconâ”‚                   â”‚ â”‚ chipPadV
 â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚           â”‚     â””â”€â”€â”€â”€â”˜                   â”‚ â”‚ + maxH
 â”‚       gap         â”‚ â”‚ + gap     â”‚                              â”‚ â”‚ + chipPadV
 â”‚      í…ìŠ¤íŠ¸       â”‚ â”‚ + textH   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–¼
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â–¼
                                   collapsedWidth = chipPadH*2 + iconW + gap + textW
 expandedWidth = max(iconW, textW) collapsedHeight = chipPadV*2 + max(iconH, textH)
 expandedHeight = iconH + gap + textH
```

```kotlin
// í˜„ì¬ ì¹˜ìˆ˜ = ë³´ê°„
val currentWidth  = lerpInt(expandedWidth,  collapsedWidth,  collapseProgress)
val currentHeight = lerpInt(expandedHeight, collapsedHeight, collapseProgress)
```

### 3-3. Place ë‹¨ê³„: ìš”ì†Œë³„ ìœ„ì¹˜ ë³´ê°„

#### ì•„ì´ì½˜ ìœ„ì¹˜

```
í™•ì¥ (progress=0)         ì¶•ì†Œ (progress=1)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â–¼ iconX   â”‚          â”‚padâ–¼                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”    â”‚          â”‚  â”Œâ”€â”€â”                â”‚
â”‚   â”‚iconâ”‚ â†centerX      â”‚  â”‚  â”‚ â† chipPadH     â”‚
â”‚   â””â”€â”€â”€â”€â”˜    â”‚          â”‚  â””â”€â”€â”˜                â”‚
â”‚             â”‚          â”‚         â† centerY     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```kotlin
// í™•ì¥: ìˆ˜í‰ ì¤‘ì•™, ìƒë‹¨ (y=0)
val expIconX = (currentWidth - iconPlaceable.width) / 2
val expIconY = 0

// ì¶•ì†Œ: ì¢Œì¸¡ íŒ¨ë”©, ìˆ˜ì§ ì¤‘ì•™
val colIconX = chipPaddingHPx                           // 12dp
val colIconY = (currentHeight - iconPlaceable.height) / 2

// ë³´ê°„
iconPlaceable.place(
    x = lerpInt(expIconX, colIconX, collapseProgress),
    y = lerpInt(expIconY, colIconY, collapseProgress)
)
```

#### í…ìŠ¤íŠ¸ ìœ„ì¹˜

```
í™•ì¥ (progress=0)         ì¶•ì†Œ (progress=1)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”Œâ”€â”€â”€â”€â”    â”‚          â”‚  â”Œâ”€â”€â”                â”‚
â”‚   â”‚iconâ”‚    â”‚          â”‚  â”‚  â”‚  í…ìŠ¤íŠ¸         â”‚
â”‚   â””â”€â”€â”€â”€â”˜    â”‚          â”‚  â””â”€â”€â”˜  â†‘ centerY     â”‚
â”‚   í…ìŠ¤íŠ¸    â”‚          â”‚                      â”‚
â”‚   â†‘ below   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```kotlin
// í™•ì¥: ì•„ì´ì½˜ ì•„ë˜, ìˆ˜í‰ ì¤‘ì•™
val expTextX = (currentWidth - textPlaceable.width) / 2
val expTextY = iconPlaceable.height + spacingPx         // ì•„ì´ì½˜ ë†’ì´ + 8dp

// ì¶•ì†Œ: ì•„ì´ì½˜ ì˜¤ë¥¸ìª½, ìˆ˜ì§ ì¤‘ì•™
val colTextX = chipPaddingHPx + iconPlaceable.width + spacingPx  // 12dp + iconW + 8dp
val colTextY = (currentHeight - textPlaceable.height) / 2

// ë³´ê°„
textPlaceable.place(
    x = lerpInt(expTextX, colTextX, collapseProgress),
    y = lerpInt(expTextY, colTextY, collapseProgress)
)
```

---

## 4. ë³´ê°„ í•¨ìˆ˜ (lerp)

### 4-1. Dp ë³´ê°„ (Compose ë‚´ì¥)

```kotlin
import androidx.compose.ui.unit.lerp

// ì•„ì´ì½˜ í¬ê¸°
val iconSize = lerp(56.dp, 24.dp, collapseProgress)
// progress=0.0 â†’ 56dp
// progress=0.5 â†’ 40dp
// progress=1.0 â†’ 24dp
```

### 4-2. Int ë³´ê°„ (ì»¤ìŠ¤í…€)

Layoutì˜ place() ì¢Œí‘œëŠ” Int(px) ë‹¨ìœ„ì´ë¯€ë¡œ ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©:

```kotlin
private fun lerpInt(start: Int, stop: Int, fraction: Float): Int =
    (start + (stop - start) * fraction).roundToInt()
```

### 4-3. ë³´ê°„ ëŒ€ìƒ ì „ì²´ ëª©ë¡

| ì†ì„± | í™•ì¥ (0f) | ì¶•ì†Œ (1f) | ë³´ê°„ ë°©ì‹ |
|:---|:---:|:---:|:---|
| í–‰ ë†’ì´ | 92dp | 48dp | `lerp(Dp)` |
| ì•„ì´ì½˜ í¬ê¸° | 56dp | 24dp | `lerp(Dp)` |
| ë‚´ë¶€ ì•„ì´ì½˜ í¬ê¸° | 24dp | 16dp | `lerp(Dp)` |
| ì•„ì´í…œ ê°„ê²© | 12dp | 8dp | `lerp(Dp)` |
| ì»¨í…Œì´ë„ˆ ë„ˆë¹„ | `max(iconW, textW)` | `padH*2 + iconW + gap + textW` | `lerpInt` |
| ì»¨í…Œì´ë„ˆ ë†’ì´ | `iconH + gap + textH` | `padV*2 + max(iconH, textH)` | `lerpInt` |
| ì•„ì´ì½˜ X | ì¤‘ì•™ | ì¢Œì¸¡ íŒ¨ë”©(12dp) | `lerpInt` |
| ì•„ì´ì½˜ Y | 0 (ìƒë‹¨) | ìˆ˜ì§ ì¤‘ì•™ | `lerpInt` |
| í…ìŠ¤íŠ¸ X | ì¤‘ì•™ | ì•„ì´ì½˜ ìš°ì¸¡ | `lerpInt` |
| í…ìŠ¤íŠ¸ Y | ì•„ì´ì½˜ ì•„ë˜ | ìˆ˜ì§ ì¤‘ì•™ | `lerpInt` |
| ì¹© ë°°ê²½ alpha | 0 (íˆ¬ëª…) | 1 (ë¶ˆíˆ¬ëª…) | `collapseProgress` ì§ì ‘ |

---

## 5. ë””ìì¸ ìƒìˆ˜ (CategoryAnimationSpec)

```kotlin
private object CategoryAnimationSpec {
    val ExpandedIconSize = 56.dp       // í™•ì¥ ìƒíƒœ ì•„ì´ì½˜ ì›í˜• ì§€ë¦„
    val CollapsedIconSize = 24.dp      // ì¶•ì†Œ ìƒíƒœ ì•„ì´ì½˜ ì›í˜• ì§€ë¦„
    val ExpandedRowHeight = 92.dp      // í™•ì¥ ìƒíƒœ ì „ì²´ í–‰ ë†’ì´
    val CollapsedRowHeight = 48.dp     // ì¶•ì†Œ ìƒíƒœ ì „ì²´ í–‰ ë†’ì´
    val ExpandedInnerIconSize = 24.dp  // í™•ì¥ ìƒíƒœ ì•„ì´ì½˜ ë‚´ë¶€ ë²¡í„° í¬ê¸°
    val CollapsedInnerIconSize = 16.dp // ì¶•ì†Œ ìƒíƒœ ì•„ì´ì½˜ ë‚´ë¶€ ë²¡í„° í¬ê¸°
    val IconTextSpacing = 8.dp         // ì•„ì´ì½˜-í…ìŠ¤íŠ¸ ê°„ê²©
    val ChipPaddingHorizontal = 12.dp  // ì¶•ì†Œ ì¹©ì˜ ì¢Œìš° íŒ¨ë”©
    val ChipPaddingVertical = 6.dp     // ì¶•ì†Œ ì¹©ì˜ ìƒí•˜ íŒ¨ë”©
    val ChipCornerRadius = 20.dp       // ì¶•ì†Œ ì¹©ì˜ ëª¨ì„œë¦¬ ë°˜ê²½
}
```

---

## 6. ì™œ Column/Row êµì²´ ëŒ€ì‹  Custom Layoutì¸ê°€

### ì´ì „ ë°©ì‹ì˜ ë¬¸ì œ (alpha êµì°¨ ì „í™˜)

```
Box {
    Column(alpha = fadeOut) { icon1 + text1 }   â† í™•ì¥ìš©
    Row(alpha = fadeIn)    { icon2 + text2 }   â† ì¶•ì†Œìš©
}
```

| ë¬¸ì œì  | ì„¤ëª… |
|:---|:---|
| ê²¹ì¹¨ ê°€ë¦¼ | alpha=0ì¸ Rowê°€ ë ˆì´ì•„ì›ƒ ê³µê°„ì„ ì°¨ì§€í•˜ë©° ì•„ì´ì½˜ì„ ê°€ë¦¼ |
| ìš”ì†Œ ì¤‘ë³µ | ì•„ì´ì½˜ 2ê°œ, í…ìŠ¤íŠ¸ 2ê°œ ë Œë”ë§ â†’ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš© |
| ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ | í˜ì´ë“œì•„ì›ƒ/ì¸ìœ¼ë¡œë§Œ ì „í™˜ë˜ì–´ "ìœ„ì¹˜ ì´ë™" ëŠë‚Œ ì—†ìŒ |
| ì „í™˜ ëŠê¹€ | progress=0.5 ì§€ì ì—ì„œ ë‘ ë ˆì´ì•„ì›ƒ ëª¨ë‘ alpha=0 â†’ ìˆœê°„ ì‚¬ë¼ì§ |

### í˜„ì¬ ë°©ì‹ì˜ ì¥ì  (Custom Layout)

```
Layout {
    chipBg(alpha)        â† ë°°ê²½ 1ê°œ
    icon(size=lerp)      â† ì•„ì´ì½˜ 1ê°œ
    text                 â† í…ìŠ¤íŠ¸ 1ê°œ
}
â†’ place(lerpInt(x), lerpInt(y))  // ìœ„ì¹˜ ì§ì ‘ ê³„ì‚°
```

| ì¥ì  | ì„¤ëª… |
|:---|:---|
| ìš”ì†Œ ìµœì†Œí™” | ì•„ì´ì½˜ 1ê°œ + í…ìŠ¤íŠ¸ 1ê°œë§Œ ë Œë”ë§ |
| ìì—°ìŠ¤ëŸ¬ìš´ ì´ë™ | ìœ„ì¹˜(x, y)ê°€ ì„ í˜• ë³´ê°„ë˜ì–´ ì´ë™ ê¶¤ì ì´ ë³´ì„ |
| í¬ê¸° ë³€í™” ë™ì‹œ ì ìš© | ì´ë™í•˜ë©´ì„œ ë™ì‹œì— í¬ê¸° ì¶•ì†Œ â†’ ì‹¤ì œ ì•±ê³¼ ë™ì¼í•œ ëŠë‚Œ |
| ëŠê¹€ ì—†ìŒ | ëª¨ë“  progress ê°’ì—ì„œ ìš”ì†Œê°€ í•­ìƒ í‘œì‹œë¨ |
| ì„±ëŠ¥ ìš°ìˆ˜ | Layoutì˜ placeëŠ” recomposition ì—†ì´ ìœ„ì¹˜ë§Œ ë³€ê²½ |

---

## 7. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

| í•­ëª© | ì ìš© ë°©ì‹ | íš¨ê³¼ |
|:---|:---|:---|
| `derivedStateOf` | collapseProgress ê³„ì‚° | ê°™ì€ ê°’ì´ë©´ recomposition ìŠ¤í‚µ |
| `mutableFloatStateOf` | scrollOffset ê´€ë¦¬ | Float ì „ìš© ìµœì í™” (boxing ë°©ì§€) |
| `remember { NestedScrollConnection }` | ì»¤ë„¥ì…˜ ìºì‹± | ë§¤ í”„ë ˆì„ ê°ì²´ ìƒì„± ë°©ì§€ |
| `Layout` place | ìœ„ì¹˜ ë³€ê²½ë§Œ ìˆ˜í–‰ | measure ì—†ì´ placementë§Œ ì¬ì‹¤í–‰ ê°€ëŠ¥ |
| `LazyRow` + `key` | `key = { item.id }` | ì•„ì´í…œ ì¬ì‚¬ìš© ìµœì í™” |
| `Offset.Zero` ë°˜í™˜ | onPreScroll | ìŠ¤í¬ë¡¤ ë¯¸ì†Œë¹„ â†’ LazyGrid ìŠ¤í¬ë¡¤ ì •ìƒ ë™ì‘ |

---

## 8. íŒŒì¼ êµ¬ì¡° ë° ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ

```
SaleTabScreen.kt
â”‚
â”œâ”€â”€ Column (nestedScroll ì ìš©)
â”‚   â”œâ”€â”€ SaleTabBar           â† ìƒë‹¨ íƒ­ (ê³ ì •)
â”‚   â”œâ”€â”€ CategoryIconRow      â† ì• ë‹ˆë©”ì´ì…˜ ì˜ì—­ (ì´ ë¬¸ì„œì˜ í•µì‹¬)
â”‚   â”‚   â””â”€â”€ LazyRow
â”‚   â”‚       â””â”€â”€ MorphingCategoryItem (per category)
â”‚   â”‚           â””â”€â”€ Layout { chipBg, icon, text }
â”‚   â”œâ”€â”€ FilterChipRow        â† í•„í„° ì¹© (ê³ ì •)
â”‚   â”œâ”€â”€ ProductCountAndSort  â† ì¹´ìš´íŠ¸/ì •ë ¬ (ê³ ì •)
â”‚   â””â”€â”€ ProductGrid          â† ìƒí’ˆ ê·¸ë¦¬ë“œ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥, weight=1f)
â”‚
â”‚ NestedScrollConnection
â”‚   scrollOffset (0 ~ 44dp px)
â”‚       â†“
â”‚   collapseProgress (0f ~ 1f)
â”‚       â†“
â”‚   CategoryIconRow(collapseProgress)
```

---

## 9. ì¹´í…Œê³ ë¦¬ ë°ì´í„°

| ID | ì´ë¦„ | ì•„ì´ì½˜ | ë°°ê²½ìƒ‰ |
|:---:|:---|:---|:---|
| 1 | ì „ì²´ | GridView | `#FFE8F0` (í•‘í¬) |
| 2 | íƒ€ì„íŠ¹ê°€ | FlashOn | `#F0E8FF` (í¼í”Œ) |
| 3 | ë©¤ë²„ì‹­ | CardMembership | `#E8F4FF` (ë¸”ë£¨) |
| 4 | ì˜¤ëŠ˜ë°œì†¡ | CalendarMonth | `#E8FFF4` (ê·¸ë¦°) |
| 5 | í•œì •ìˆ˜ëŸ‰ | Timer | `#FFFBE8` (ì˜ë¡œìš°) |
| 6 | ë·°í‹° | Spa | `#FFF0E8` (ì˜¤ë Œì§€) |
| 7 | ë¸Œëœë“œê´€ | Store | `#E8FFFF` (ë¯¼íŠ¸) |
| 8 | ì‹ ìƒí’ˆ | NewReleases | `#F4E8FF` (ë¼ë²¤ë”) |

ì„ íƒëœ ì¹´í…Œê³ ë¦¬: SaleRed(`#FF4B50`) 2dp ë³´ë”

---

## 10. ì§„í–‰ë„ë³„ ìŠ¤ëƒ…ìƒ·

```
progress = 0.0 (ì™„ì „ í™•ì¥)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸŸ¢56dp] [ğŸ”µ56dp] [ğŸŸ£56dp] [ğŸŸ¡56dp] ...                â”‚  92dp
â”‚  ì „ì²´     íƒ€ì„íŠ¹ê°€   ë©¤ë²„ì‹­    ì˜¤ëŠ˜ë°œì†¡                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

progress = 0.3
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢46dp]  [ğŸ”µ46dp]  [ğŸŸ£46dp] ...                      â”‚  ~79dp
â”‚   ì „ì²´  â†—   íƒ€ì„íŠ¹ê°€ â†—                                  â”‚  í…ìŠ¤íŠ¸ê°€ ìš°ì¸¡ìœ¼ë¡œ ì´ë™ ì‹œì‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

progress = 0.5 (ì¤‘ê°„)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸŸ¢40dp] ì „ì²´  [ğŸ”µ40dp] íƒ€ì„íŠ¹ê°€ ...                   â”‚  ~70dp
â”‚  ì¹© ë°°ê²½ 50% íˆ¬ëª…                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

progress = 0.7
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œ[ğŸŸ¢32]ì „ì²´â” â”Œ[ğŸ”µ32]íƒ€ì„íŠ¹ê°€â” ...                       â”‚  ~61dp
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì¹© ë°°ê²½ 70% ë¶ˆíˆ¬ëª…          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

progress = 1.0 (ì™„ì „ ì¶•ì†Œ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œ[ğŸŸ¢24]ì „ì²´â” â”Œ[ğŸ”µ24]íƒ€ì„íŠ¹ê°€â” â”Œ[ğŸŸ£24]ë©¤ë²„ì‹­â” ...        â”‚  48dp
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì¹© í˜•íƒœ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. ì£¼ìš” Compose API ì°¸ì¡°

| API | ìš©ë„ | íŒŒì¼ |
|:---|:---|:---|
| `NestedScrollConnection.onPreScroll` | ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸° | SaleTabScreen.kt |
| `derivedStateOf` | íŒŒìƒ ìƒíƒœ ìµœì í™” | SaleTabScreen.kt |
| `mutableFloatStateOf` | Float ìƒíƒœ (boxing ë°©ì§€) | SaleTabScreen.kt |
| `Layout { measurables, constraints -> }` | ì»¤ìŠ¤í…€ ë ˆì´ì•„ì›ƒ | CategoryIconRow.kt |
| `Placeable.place(x, y)` | ìš”ì†Œ ë°°ì¹˜ | CategoryIconRow.kt |
| `Constraints.fixed(w, h)` | ê³ ì • í¬ê¸° ì œì•½ | CategoryIconRow.kt |
| `lerp(start: Dp, stop: Dp, fraction)` | Dp ë³´ê°„ | CategoryIconRow.kt |
| `Modifier.alpha()` | íˆ¬ëª…ë„ ì• ë‹ˆë©”ì´ì…˜ | CategoryIconRow.kt |
| `LazyRow` + `itemsIndexed` + `key` | ê°€ë¡œ ìŠ¤í¬ë¡¤ ë¦¬ìŠ¤íŠ¸ | CategoryIconRow.kt |
| `Modifier.nestedScroll()` | ì¤‘ì²© ìŠ¤í¬ë¡¤ ì—°ê²° | SaleTabScreen.kt |
